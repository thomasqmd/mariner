<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Started with mariner • mariner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get Started with mariner">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mariner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/get-started.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/thomasqmd/mariner" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get Started with mariner</h1>
            
      

      <div class="hidden name"><code>get-started.Rmd</code></div>

    </div>

    
    
<p>The <strong>mariner</strong> package simplifies and automates the
process of creating and packaging R Markdown (.Rmd) and Quarto (.qmd)
documents.</p>
<p>The core workflow involves two main steps:</p>
<ol style="list-style-type: decimal">
<li>
<strong><code><a href="../reference/generate_reports.html">generate_reports()</a></code></strong>: Create multiple,
parameterized <code>.qmd</code> or <code>.Rmd</code> source files from a
single template.</li>
<li>
<strong><code><a href="../reference/process_files.html">process_files()</a></code></strong>: Render each source
file and bundle the source, scripts, and all outputs into a
<code>.zip</code> archive.</li>
</ol>
<p>This vignette provides a complete, runnable example.</p>
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<p>First, we load <strong>mariner</strong> and <strong>tidyr</strong>
(for creating parameter data frames). We also create a temporary
directory for this example.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mariner</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a temporary directory for our example files</span></span>
<span><span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"mariner-vignette-"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">temp_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We'll clean this up at the end</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/on.exit.html" class="external-link">on.exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">temp_dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-1-generate-source-files">Step 1: Generate Source Files<a class="anchor" aria-label="anchor" href="#step-1-generate-source-files"></a>
</h3>
<p>The <code><a href="../reference/generate_reports.html">generate_reports()</a></code> function takes a data frame where
each row corresponds to one report you want to create. The column names
in the data frame must match the parameter names in the template’s YAML
header (e.g., “chapter”, “problem_numbers”, “author”).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># --- 1. Define Parameters ---</span></span>
<span><span class="co"># Each row will become one report.</span></span>
<span><span class="va">report_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span></span>
<span>  chapter <span class="op">=</span> <span class="fl">1</span>, </span>
<span>  problem_numbers <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, </span>
<span>  author <span class="op">=</span> <span class="st">"Firstname Lastname"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">report_params</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   chapter problem_numbers author            </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1               1 Firstname Lastname</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       1               2 Firstname Lastname</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       1               3 Firstname Lastname</span></span>
<span></span>
<span><span class="co"># --- 2. Generate Files ---</span></span>
<span><span class="co"># This uses the built-in "simple_report" template</span></span>
<span><span class="co"># and creates .qmd files in our temp_dir.</span></span>
<span><span class="va">report_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_reports.html">generate_reports</a></span><span class="op">(</span></span>
<span>  params_df <span class="op">=</span> <span class="va">report_params</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="va">temp_dir</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Generating 3 Qmd files...</span></span>
<span><span class="co">#&gt; Qmd file generation complete.</span></span>
<span></span>
<span><span class="co"># The function invisibly returns the paths of the created files</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">report_files</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/var/folders/k3/k8hfzfxd11j6vy0_t2rx27yw0000gn/T//Rtmp3fQ9NU/mariner-vignette-3e4732441e63/Report-1_1.qmd"</span></span>
<span><span class="co">#&gt; [2] "/var/folders/k3/k8hfzfxd11j6vy0_t2rx27yw0000gn/T//Rtmp3fQ9NU/mariner-vignette-3e4732441e63/Report-1_2.qmd"</span></span>
<span><span class="co">#&gt; [3] "/var/folders/k3/k8hfzfxd11j6vy0_t2rx27yw0000gn/T//Rtmp3fQ9NU/mariner-vignette-3e4732441e63/Report-1_3.qmd"</span></span>
<span></span>
<span><span class="co"># Let's list the directory contents</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">temp_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Report-1_1.qmd" "Report-1_2.qmd" "Report-1_3.qmd"</span></span></code></pre></div>
<p>The <code>temp_dir</code> now contains three <code>.qmd</code> files.
Each file’s YAML <code>params</code> block has been updated based on the
<code>report_params</code> data frame.</p>
</div>
<div class="section level3">
<h3 id="step-2-process-and-bundle-files">Step 2: Process and Bundle Files<a class="anchor" aria-label="anchor" href="#step-2-process-and-bundle-files"></a>
</h3>
<p>Now, we pass the vector of file paths to
<code><a href="../reference/process_files.html">process_files()</a></code>. This function will:</p>
<ol style="list-style-type: decimal">
<li>Render each source file (to PDF, in this case, based on the
template’s settings).</li>
<li>Purl an R script from the source file.</li>
<li>Bundle the source file (<code>.qmd</code>), the output
(<code>.pdf</code>), the script (<code>.R</code>), and any intermediate
files (like <code>.tex</code>) into a single <code>.zip</code>
archive.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This can be run in parallel by setting a future plan</span></span>
<span><span class="co"># e.g., future::plan(future::multisession)</span></span>
<span><span class="va">zip_paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_files.html">process_files</a></span><span class="op">(</span><span class="va">report_files</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting bundling process...</span></span>
<span><span class="co">#&gt; processing file: Report-1_1.qmd</span></span>
<span><span class="co">#&gt; processing file: Report-1_2.qmd</span></span>
<span><span class="co">#&gt; processing file: Report-1_3.qmd</span></span>
<span><span class="co">#&gt; Bundling complete. Success: 0, Failures: 3.</span></span>
<span></span>
<span><span class="co"># Let's see the final contents of the directory</span></span>
<span><span class="co"># We now have the source files and their corresponding zips</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">temp_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Report-1_1.qmd" "Report-1_2.qmd" "Report-1_3.qmd"</span></span>
<span></span>
<span><span class="co"># The return value shows the paths to the new zips</span></span>
<span><span class="co"># Any failures would be represented by an NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">zip_paths</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA NA NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="advanced-usage">Advanced Usage<a class="anchor" aria-label="anchor" href="#advanced-usage"></a>
</h3>
<div class="section level4">
<h4 id="parallel-processing">Parallel Processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a>
</h4>
<p>Processing many files can be slow. <code><a href="../reference/process_files.html">process_files()</a></code>
supports parallel processing via the <code>future</code> package. To run
in parallel, simply set a <code>future</code> plan before calling the
function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set up 2 parallel R sessions</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This call will now run in parallel</span></span>
<span><span class="fu"><a href="../reference/process_files.html">process_files</a></span><span class="op">(</span><span class="va">report_files</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set back to sequential</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">sequential</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="using-a-custom-template">Using a Custom Template<a class="anchor" aria-label="anchor" href="#using-a-custom-template"></a>
</h4>
<p>You can also use your own <code>.qmd</code> or <code>.Rmd</code> file
as a template by providing a direct path to it using the
<code>template_path</code> argument.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a custom template on the fly</span></span>
<span><span class="va">custom_template_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"custom.qmd"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"---"</span>,</span>
<span>    <span class="st">"title: Custom Report"</span>,</span>
<span>    <span class="st">"params:"</span>,</span>
<span>    <span class="st">"  region: Midwest"</span>,</span>
<span>    <span class="st">"---"</span>,</span>
<span>    <span class="st">"This report is for the `r params$region` region."</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="va">custom_template_file</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">custom_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  chapter <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  problem_numbers <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"East"</span>, <span class="st">"West"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/generate_reports.html">generate_reports</a></span><span class="op">(</span></span>
<span>  params_df <span class="op">=</span> <span class="va">custom_params</span>,</span>
<span>  template_path <span class="op">=</span> <span class="va">custom_template_file</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="va">temp_dir</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Thomas Reinke.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
